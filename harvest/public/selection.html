<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width">
  <title>Nemeth Test Generation: Document Selection</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<span class="title">Document Selection</span>

<div class="converter" id="inputpanel">
<div class="section">
Select a document to work on:
</div>
<table id="selection">
  <tr class="heading">
    <th>Name</th>
    <th>Information</th>
    <th>Path</th>
  </tr>
</table>
</div>
    
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="/__/firebase/8.1.1/firebase-app.js"></script>
<script src="/__/firebase/8.1.1/firebase-auth.js"></script>
<script src="/__/firebase/8.1.1/firebase-firestore.js"></script>
<script src="/__/firebase/8.1.1/firebase-storage.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

<!-- Initialize Firebase -->
<script src="/__/firebase/init.js"></script>
<script id="Braille-script" src="./braille-convert.js"></script>
<script src="./firebase-update.js"></script>
<script>
let storage = localStorage[Fireup.Fc.NemethProjectDocuments];
if (storage) {
let documents = JSON.parse(storage);
let table = document.getElementById('selection');
for (let entry of documents) {
  let row = document.createElement('tr');
  row.setAttribute('tabindex', '0');
  row.classList.add('selection');
  row.innerHTML = `<td class="selection">${entry.name}</td><td>${entry.information}</td><td>${entry.path}</td>`;
      row.addEventListener('click', () => {
        localStorage[Fireup.Fc.NemethProjectPath] = entry.path;
        localStorage[Fireup.Fc.NemethProjectUser] = firebase.auth().getUid();
        window.location.assign('brf2nemeth.html');
      });
      row.addEventListener('keyup', (e) => {
      if (e.key === 'Enter') {
        localStorage[Fireup.Fc.NemethProjectPath] = entry.path;
        localStorage[Fireup.Fc.NemethProjectUser] = firebase.auth().getUid();
        window.location.assign('brf2nemeth.html');
      }});
  table.appendChild(row);
}}
</script>
</body>
</html>
